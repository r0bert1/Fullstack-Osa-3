{"version":3,"sources":["services/persons.js","App.js","index.js"],"names":["services_persons","axios","get","then","response","data","newObject","post","id","delete","concat","Filter","props","react_default","a","createElement","value","onChange","PersonForm","onSubmit","clickHandler","nameValue","nameChangeHandler","numberValue","numberChangeHandler","type","Persons","restrictionValue","persons","filter","person","name","toLowerCase","includes","map","key","number","onClick","Notification","_ref","message","error","style","color","background","fontSize","borderStyle","borderRadius","padding","marginBottom","App","_useState","useState","_useState2","Object","slicedToArray","setPersons","_useState3","_useState4","newName","setNewName","_useState5","_useState6","newNumber","setNewNumber","_useState7","_useState8","newRestriction","SetNewRestriction","_useState9","_useState10","setMessage","_useState11","_useState12","setError","useEffect","personService","initialPersons","App_Notification","App_Filter","event","target","App_PersonForm","preventDefault","personObject","selected","find","window","confirm","put","setTimeout","catch","returnedPerson","App_Persons","ReactDOM","render","src_App","document","getElementById"],"mappings":"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","file":"static/js/main.408ab1af.chunk.js","sourcesContent":["import axios from 'axios'\r\nconst baseUrl = '/api/persons'\r\n\r\nconst getAll = () => {\r\n    const request = axios.get(baseUrl)\r\n    return request.then(response => response.data)\r\n}\r\n\r\nconst create = newObject => {\r\n    const request = axios.post(baseUrl, newObject)\r\n    return request.then(response => response.data)\r\n}\r\n\r\nconst remove = (id) => {\r\n    const request = axios.delete(`${baseUrl}/${id}`)\r\n    return request.then(response => response.data)\r\n}\r\n\r\nexport default { getAll, create, remove }","import React, { useState, useEffect } from 'react'\nimport personService from './services/persons'\nimport axios from 'axios'\n \nconst Filter = (props) => {\n\n  return (\n    <div>\n      rajaa näytettäviä: <input value={props.value} onChange={props.onChange} />\n    </div>\n  )\n}\n\nconst PersonForm = (props) => {\n\n  return (\n    <div>\n      <form onSubmit={props.clickHandler}>\n        <div>\n          nimi: <input \n            value={props.nameValue} \n            onChange={props.nameChangeHandler}\n          />         \n        </div>\n        <div>\n          numero: <input \n            value={props.numberValue} \n            onChange={props.numberChangeHandler}\n          />           \n        </div>\n        <div>\n          <button type=\"submit\">lisää</button>\n        </div>\n      </form>      \n    </div>\n  )\n}\n\nconst Persons = (props) => {\n\n  const personsToShow = (props.restrictionValue === null)\n    ? props.persons\n    : props.persons.filter(person => person.name.toLowerCase().includes(props.restrictionValue.toLowerCase()))\n\n  return (\n    personsToShow.map(person =>\n      <div key={person.name}>\n        {person.name} {person.number} <button onClick={() => props.clickHandler(person.id)}>poista</button>\n      </div> \n    )\n  )\n}\n\nconst Notification = ({ message, error }) => {\n  const errorStyle = {\n    color: 'red',\n    background: 'lightgrey',\n    fontSize: 20,\n    borderStyle: 'solid',\n    borderRadius: 5,\n    padding: 10,\n    marginBottom: 10\n  }\n\n  const notifStyle = {\n    color: 'green',\n    background: 'lightgrey',\n    fontSize: 20,\n    borderStyle: 'solid',\n    borderRadius: 5,\n    padding: 10,\n    marginBottom: 10\n  }\n  \n  if (message === null) {\n    return null\n  }\n\n  if (error) {\n    return (\n      <div style={errorStyle}>\n        {message}\n      </div>\n    )\n  }\n\n  return (\n    <div style={notifStyle}>\n      {message}\n    </div>\n  )\n}\n\nconst App = () => {\n  const [ persons, setPersons] = useState([])\n  const [ newName, setNewName ] = useState('')\n  const [ newNumber, setNewNumber ] = useState('')\n  const [ newRestriction, SetNewRestriction ] = useState('')\n  const [ message, setMessage] = useState(null)\n  const [ error, setError] = useState(false)\n\n  useEffect(() => {\n    personService\n      .getAll()\n      .then(initialPersons => {\n        setPersons(initialPersons)\n      })\n  }, [])\n\n  const addPerson = (event) => {\n    event.preventDefault()\n    const personObject = {\n      name: newName,\n      number: newNumber\n    }\n\n    const names = persons.map(person =>\n      person.name\n    )\n\n    if (!names.includes(newName)) {\n      personService\n        .create(personObject)\n        .then(returnedPerson => {\n          setMessage(`Lisättiin ${newName}`)\n          setTimeout(() => {\n            setMessage(null)\n          }, 5000)\n          setPersons(persons.concat(returnedPerson))\n          setNewName('')\n          setNewNumber('')\n        })\n    } else {\n      const selected = persons.find(person => person.name === newName)\n\n      if (window.confirm(`${newName} on jo luettelossa, korvataanko vanha numero uudella?`)) {\n        axios\n          .put(`http://localhost:3001/api/persons/${selected.id}`, personObject)\n          .then(response => {\n            setPersons(persons.map(person => person.id !== selected.id ? person : response.data))\n            setMessage(`Henkilön ${selected.name} numero vaihdettu`)\n            setTimeout(() => {\n              setMessage(null)\n            }, 5000)\n            setNewName('')\n            setNewNumber('')\n          })\n          .catch(error => {\n            setPersons(persons.filter(person => person.id !== selected.id))\n            setError(true)\n            setMessage(`Henkilö ${selected.name} oli jo poistettu`)\n            setTimeout(() => {\n              setMessage(null)\n              setError(false)\n            }, 5000)\n          })\n      }\n    }\n  }\n\n  const handleNameChange = (event) => {\n    setNewName(event.target.value)\n  }\n\n  const handleNumberChange = (event) => {\n    setNewNumber(event.target.value)\n  }\n  \n  const handleRestrictionChange = (event) => {\n    SetNewRestriction(event.target.value)\n  }\n\n  const handleDeletion = (id) => {\n    const selected = persons.find(person => person.id === id)\n\n    if (window.confirm(`Poistetaanko ${selected.name}?`)) {\n      personService\n        .remove(id)\n        .then(() => {\n          setPersons(persons.filter(person => person.id !== id))\n          setMessage(`${selected.name} poistettu`)\n          setTimeout(() => {\n            setMessage(null)\n          }, 5000)\n        })\n\n    }\n  }\n\n  return (\n    <div>\n      <h1>Puhelinluettelo</h1>\n      <Notification message={message} error={error} />\n      <Filter value={newRestriction} onChange={handleRestrictionChange} />\n      <h2>lisää uusi</h2>\n      <PersonForm nameValue={newName}\n        numberValue={newNumber} \n        nameChangeHandler={handleNameChange}\n        numberChangeHandler={handleNumberChange}\n        clickHandler={addPerson}\n      />\n      <h2>Numerot</h2>\n      <div>\n        <Persons restrictionValue={newRestriction} persons={persons} clickHandler={handleDeletion}/>\n      </div> \n    </div>\n  )\n\n}\n\nexport default App\n","import React from 'react'\nimport ReactDOM from 'react-dom'\nimport App from './App'\n\nReactDOM.render(\n  <App />,\n  document.getElementById('root')\n)\n"],"sourceRoot":""}